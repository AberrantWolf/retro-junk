# Nintendo 64 ROM Format

## File Extensions
- `.n64` - Nintendo 64 ROMs (big-endian)
- `.v64` - Byteswapped format (little-endian words)
- `.z64` - Native format (big-endian)

## Header Format (0x0000-0x003F)

| Offset | Size | Field |
|--------|------|-------|
| 0x0000 | 1 | Reserved (usually 0x80) |
| 0x0001 | 3 | PI BSD DOM1 Configuration Flags |
| 0x0004 | 4 | Clock Rate |
| 0x0008 | 4 | Boot Address (initial PC in RDRAM) |
| 0x000C | 4 | Libultra Version |
| 0x0010 | 8 | Check Code (64-bit integrity check) |
| 0x0018 | 8 | Reserved |
| 0x0020 | 20 | Game Title (ASCII or JIS X 0201) |
| 0x0034 | 7 | Reserved |
| 0x003B | 4 | Game Code (Category + Unique + Destination) |
| 0x003F | 1 | ROM Version |

## Detection Method

1. Check for "magic value" 0x80371240 in first 4 bytes (common but not reliable)
2. Verify Check Code integrity using IPL3 algorithm
3. Look for valid Game Code format
4. Check Boot Address (commonly 0x80000400)

## Game Code Format (0x003B)

| Byte | Field | Description |
|------|-------|-------------|
| 0 | Category | N=Game Pak, D=64DD, C=Expandable, etc. |
| 1-2 | Unique | Two-character game identifier |
| 3 | Destination | Region code (E=North America, J=Japan, P=Europe, etc.) |

## Homebrew ROM Header Extensions (0x0034-0x003F)

| Offset | Size | Field |
|--------|------|-------|
| 0x0034 | 4 | Controller configuration (ports 1-4) |
| 0x0038 | 1 | Flags (metadata, etc.) |
| 0x0039 | 3 | Reserved |
| 0x003C | 2 | Game ID ("ED" for homebrew header) |
| 0x003E | 1 | Reserved |
| 0x003F | 1 | Savetype (bitfield: RTC, region-free, save type) |

## Sources

- [N64brew Wiki ROM Header](https://n64brew.dev/wiki/ROM_Header)

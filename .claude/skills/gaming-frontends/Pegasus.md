# Pegasus Frontend

**Source:** [GitHub](https://github.com/mmatyas/pegasus-frontend) |
[Website](https://pegasus-frontend.org/) |
[Docs](https://pegasus-frontend.org/docs/) |
[Metadata Files](https://pegasus-frontend.org/docs/user-guide/meta-files/) |
[Asset Files](https://pegasus-frontend.org/docs/user-guide/meta-assets/) |
[API Reference](https://pegasus-frontend.org/docs/themes/api/)

## Overview

Pegasus is a cross-platform graphical frontend for launching emulators and managing game
collections. Built with Qt/QML, its primary differentiator is a powerful theme API that gives
theme creators full control over the UI via QML. It uses a simple plain-text metadata format and
can also import data from EmulationStation, Steam, LaunchBox, and Skraper.

Pegasus does not include a built-in scraper. Metadata is either written manually, generated by
external tools (Skyscraper, Skraper, bellerophon), or imported from other frontends.

## Data Directory Locations

Pegasus looks for metadata files in directories configured in **Settings > Set game directories**.

| Platform | Config location |
|----------|----------------|
| Linux    | `~/.config/pegasus-frontend/` |
| macOS    | `~/Library/Preferences/pegasus-frontend/` |
| Windows  | `%APPDATA%\pegasus-frontend\` |
| Android  | `/storage/emulated/0/pegasus-frontend/` |

The `game_dirs.txt` file in the config directory lists all directories Pegasus scans for
`metadata.pegasus.txt` files.

## Metadata File Format

Metadata is stored in plain text files named `metadata.pegasus.txt` (or `metadata.txt` for
backward compatibility). Each file is placed alongside the game files it describes.

The format uses a key-value structure with two group types: **collections** and **games**.

### Complete Example

```
collection: Nintendo 64
shortname: n64
command: retroarch -L mupen64plus_next_libretro {file.path}
extension: z64, n64, v64
ignore-extension: srm, sav

game: Super Mario 64
file: Super Mario 64 (USA).z64
sort-by: Super Mario 64
developer: Nintendo EAD
publisher: Nintendo
genre: Platform
tag: 3D Platformer
tag: Collectathon
players: 1
release: 1996-06-23
rating: 90%
summary: Mario explores Princess Peach's castle and its magical worlds.
description:
  Mario is invited to Peach's castle, but when he arrives Bowser has taken
  over the castle and imprisoned the princess. Mario must collect Power Stars
  hidden in the castle's paintings to unlock doors and ultimately defeat Bowser.
assets.box_front: media/covers/Super Mario 64 (USA).png
assets.screenshot: media/screenshots/Super Mario 64 (USA).png
assets.video: media/videos/Super Mario 64 (USA).mp4
assets.logo: media/logos/Super Mario 64 (USA).png
x-hash-sha1: 9BEFE3F6BCDE1E9E3B0B1B9D3F1F0A2E5C6D7E8F

game: GoldenEye 007
file: GoldenEye 007 (USA).z64
developer: Rare
publisher: Nintendo
genre: First-Person Shooter
players: 1-4
release: 1997-08-25
rating: 95%
```

### Collection Fields

| Field | Description |
|-------|-------------|
| `collection:` | **Required.** Collection name (typically the platform/system name) |
| `shortname:` | Short identifier for the collection |
| `command:` / `launch:` | Default launch command. `{file.path}` is replaced with the game file |
| `workdir:` / `cwd:` | Working directory for the launch command |
| `extension:` / `extensions:` | File extensions to include (comma-separated) |
| `file:` / `files:` | Explicit file list to include |
| `directory:` / `directories:` | Additional directories to scan |
| `regex:` | Regex pattern for file matching |
| `ignore-extension:` / `ignore-extensions:` | Extensions to exclude |
| `ignore-file:` / `ignore-files:` | Specific files to exclude |
| `sort-by:` | Sort title for the collection itself |
| `summary:` | Short collection description |
| `description:` | Longer collection description |

### Game Fields

| Field | Description |
|-------|-------------|
| `game:` | **Required.** Game title |
| `file:` / `files:` | Path(s) to game file(s). Multi-disc games list multiple files |
| `sort-by:` | Alternative title for sorting (aliases: `sort-title`, `sort_title`, `sort_by`, `sort-name`, `sortby`, `sorttitle`, `sortname`) |
| `developer:` / `developers:` | Developer name(s) (multiple values on separate indented lines) |
| `publisher:` / `publishers:` | Publisher name(s) |
| `genre:` / `genres:` | Genre(s) |
| `tag:` / `tags:` | Custom tags |
| `players:` | Player count (e.g., `1`, `1-4`) |
| `summary:` | Short description (one-liner) |
| `description:` | Long description (can span multiple indented lines) |
| `release:` | Release date (`YYYY-MM-DD`, `YYYY-MM`, or `YYYY`) |
| `rating:` | Rating as percentage (`90%`) or decimal (`0.9`) |
| `launch:` / `command:` | Per-game launch command override |
| `workdir:` / `cwd:` | Per-game working directory override |
| `x-<key>:` | Custom extension fields for external tools (e.g., `x-hash-sha1:`) |

### Asset Fields

Assets are specified per-game using `assets.<type>:` fields:

**Single-value asset types:**

| Asset key | Description |
|-----------|-------------|
| `assets.box_front` | Front box art |
| `assets.box_back` | Back box art |
| `assets.box_spine` | Box spine |
| `assets.box_full` / `assets.box` | Full unfolded box |
| `assets.cartridge` | Cartridge/physical media image |
| `assets.logo` | Game logo (transparent) |
| `assets.marquee` | Marquee image |
| `assets.bezel` | Bezel/overlay frame |
| `assets.gridicon` | Grid/tile icon |
| `assets.flyer` | Promotional flyer |
| `assets.background` | Background image |
| `assets.music` | Background music file |
| `assets.titlescreen` | Title screen image |

**Multi-value asset types** (list multiple on indented lines):

| Asset key | Description |
|-----------|-------------|
| `assets.screenshots` | In-game screenshots |
| `assets.videos` | Video files |
| `assets.fanarts` | Fan art images |

### Directory-Based Asset Detection

Pegasus also auto-detects media files placed in conventional directory structures alongside games:

```
game_directory/
  metadata.pegasus.txt
  Super Mario 64 (USA).z64
  media/
    box_front/
      Super Mario 64 (USA).png
    screenshots/
      Super Mario 64 (USA).png
    videos/
      Super Mario 64 (USA).mp4
    logo/
      Super Mario 64 (USA).png
```

Pegasus also recognizes Skraper's directory layout (`media/` or `skraper/` directories).

### Multi-line Values

Values can span multiple lines. Continuation lines must start with at least one space or tab:

```
description:
  This is a long description that spans
  multiple lines. Each continuation line
  starts with whitespace.
```

For list-type fields (developers, files, tags), each indented line is a separate item:

```
developers:
  Nintendo EAD
  Shigeru Miyamoto (director)
files:
  Final Fantasy VII (Disc 1).cue
  Final Fantasy VII (Disc 2).cue
  Final Fantasy VII (Disc 3).cue
```

## Importing from Other Sources

Pegasus can natively read metadata from other frontends (configurable in Settings):

- **EmulationStation:** Reads `es_systems.cfg` and `gamelist.xml` files
- **Steam:** Auto-detects installed Steam games with metadata and assets
- **LaunchBox:** Reads LaunchBox's XML data files
- **Skraper:** Recognizes Skraper's `media/` directory layout for assets

A [metadata converter tool](https://pegasus-frontend.org/tools/convert/) is available on the
Pegasus website for converting between EmulationStation and Pegasus formats.

## Notes for Metadata Generation

- The `metadata.pegasus.txt` format is simple to generate programmatically -- it is just
  indentation-aware plain text, no XML/JSON parsing needed.
- Always include `collection:` with at least `extension:` or `file:` to define what files
  belong to the collection.
- Each `game:` entry should have at least one `file:` field.
- Use `x-` prefixed fields to store custom data (e.g., `x-screenscraper-id:`, `x-hash-crc32:`)
  without conflicting with official fields.
- The `rating:` field accepts percentages (`90%`) which is convenient for sources that use 0-100
  scales.
- For multi-disc games, list all disc files under a single `game:` entry.
- File paths are relative to the directory containing the `metadata.pegasus.txt` file.

## Information Sources

- [Pegasus Metadata Files Documentation](https://pegasus-frontend.org/docs/user-guide/meta-files/)
- [Pegasus Asset Files Documentation](https://pegasus-frontend.org/docs/user-guide/meta-assets/)
- [Pegasus API Reference](https://pegasus-frontend.org/docs/themes/api/)
- [Pegasus Other Sources](https://pegasus-frontend.org/docs/user-guide/meta-sources/)
- [Pegasus Metadata Converter](https://pegasus-frontend.org/tools/convert/)
- [Pegasus Breaking Changes](https://pegasus-frontend.org/docs/user-guide/breaking-changes/)
- [PegasusMetadata.cpp source](https://github.com/mmatyas/pegasus-frontend/blob/master/src/backend/providers/pegasus_metadata/PegasusMetadata.cpp)
